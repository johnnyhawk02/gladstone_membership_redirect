<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Active Sefton Redirect</title>

  <!-- PWA meta -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0a0a0a" />
</head>
<body>
  <div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;">
    <button onclick="handleButtonClick()" style="background-color: #007bff; color: white; border: none; padding: 15px 30px; font-size: 16px; border-radius: 5px; cursor: pointer;">
      Put membership link on homepage
    </button>
  </div>

  <div style="text-align: center; padding: 50px; font-family: Arial, sans-serif;">
    <button onclick="installApp()" style="background-color: #007bff; color: white; border: none; padding: 15px 30px; font-size: 16px; border-radius: 5px; cursor: pointer;">
      Install as App
    </button>
    <p style="margin-top: 20px; color: #666;">Add this page to your home screen to create a shortcut.</p>
  </div>

  <script>
    // Check if app is launched in standalone mode (i.e., from home screen icon)
    const isStandalone = 
      window.navigator.standalone === true ||
      window.matchMedia('(display-mode: standalone)').matches ||
      document.referrer === "" && window.location.pathname !== "/";

    console.log('Standalone check:', {
      navigatorStandalone: window.navigator.standalone,
      displayMode: window.matchMedia('(display-mode: standalone)').matches,
      referrer: document.referrer,
      pathname: window.location.pathname,
      isStandalone: isStandalone
    });

    // Force redirect if any standalone indicator is true
    if (isStandalone || window.navigator.standalone === true) {
      console.log('Redirecting to site-finder...');
      window.location.href = 'https://activesefton.gladstonego.cloud/site-finder';
    }

    function installApp() {
      alert('Use your browser menu to "Add to Home Screen" or "Install App"');
    }
  </script>
</body>
</html>
